#!/usr/bin/python
# vim: ts=4 et sw=4 si
"""
A tool to expand *.php files by interpreting (include|require)[_once]
statements
"""
from optparse import OptionParser
parser=OptionParser(version='%prog 0.1')
parser.add_option('--verbose', '-v',
                  action='count')
option, args=parser.parse_args()
if len(args) != 1:
    import sys
    print >> sys.stderr, 'Please specify exacly one source file!'
    sys.exit(1)

expanded={}
glb={'here': os.path.abspath(os.path.split(args[0])[0]),
     }
import re
RE_INCLUDE=re.compile(r'\b(include|require)(_once)? *\(([^)]+)\)')
def expand(raw_filename, parent, line=0, once=0):
    """
    The workhorse function
    """
    filename=expand_filename(raw_filename)
    if once:
        if expanded.has_key(filename):
            if show_not_included():
                unincluded_info(filename)
    while 1:
        line='TOTALLY INCOMPLETE AND UNUSABLE'
    
    
